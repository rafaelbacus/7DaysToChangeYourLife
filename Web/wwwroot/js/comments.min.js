"use strict";function commentAddSuccess(t,e,o){var n=$(".comments .comment-msg");if(t.result.succeeded){$(n).addClass("text-success");var a=tinymce.get("CommentEditor");a.setContent(""),SetCharacterCount(a,".post-detail .character-count");var m=$(".comment-author").first().val(),r=$.trim(a.getContent({format:"text"}));CreateCommentBlock(m,t.date,r)}else $(n).addClass("text-danger");$(n).html(t.result.message),$(".comments #RequestVerificationToken").val(t.token)}function commentAddError(t,e,o){var n=$(".comments .comment-msg");$(n).addClass("text-danger"),$(n).text("Unable to add comment at this time.")}function CreateCommentBlock(t,e,o){var n=$("<div></div>",{class:"comment"}),a=$("<h4></h4>").text(t),m=$("<p></p>").text(e),r=$("<span></span>").text(o);$(n).append(a),$(n).append(m),$(n).append(r);var s=$(".comments-list");0!=$(s).children(".first-to-comment").length&&$(s).empty(),$(s).append(n)}$(function(){-1!==window.location.href.indexOf("Post/Detail")&&SetCommentAuthor()}),$(document).on("click",".comment-add",function(t){var e=tinymce.get("CommentEditor"),o=$(".comment-author").first().val(),n=$.trim(e.getContent({format:"text"})),a=$(".comments .comment-msg"),m=$(".comments #RequestVerificationToken").val();if(SetLocalStorageAuthor(o),n.length<1)return $(a).addClass("text-danger"),$(a).text("Comment is required."),!1;$.ajax({method:"POST",url:"/Comment/Add",data:{PostId:$(this).data("id"),Author:o,Content:n},dataType:"json",beforeSend:function(t,e){t.setRequestHeader("RequestVerificationToken",m);var o=$(".comments .comment-msg");$(o).text(""),$(o).removeClass("text-success"),$(o).removeClass("text-danger");var n=$(".comments .loader");$(n).removeClass("d-none")}}).then(commentAddSuccess,commentAddError).always(function(){$(".comments .loader").addClass("d-none")})});var authorKey="comment-author";function SetLocalStorageAuthor(t){"undefined"!=typeof Storage&&""!==t&&localStorage.setItem(authorKey,t)}function SetCommentAuthor(){if("undefined"!=typeof Storage){var t=localStorage.getItem(authorKey);void 0===t&&""===t||$(".comment-author").val(t)}}