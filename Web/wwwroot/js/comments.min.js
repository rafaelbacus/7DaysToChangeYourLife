"use strict";function commentAddSuccess(t,e,o){var n=$(".comments .comment-msg");t.succeeded?$(n).addClass("text-success"):$(n).addClass("text-danger"),$(n).html(t.message)}function commentAddError(t,e,o){var n=$(".comments .comment-msg");$(n).addClass("text-danger"),$(n).text("Unable to add comment at this time.")}$(function(){-1!==window.location.href.indexOf("Post/Detail")&&SetCommentAuthor()}),$(document).on("click",".comment-add",function(t){var e=tinymce.get("CommentEditor"),o=$.trim(e.getContent({format:"text"})),n=$(".comment-author").first().val(),m=$(".comments .comment-msg");if(SetLocalStorageAuthor(n),o.length<1)return $(m).addClass("text-danger"),$(m).text("Comment is required."),!1;$.ajax({method:"POST",url:"/Comment/Add",data:{PostId:$(this).data("id"),Author:n,Content:o},dataType:"json",beforeSend:function(t,e){var o=$(".comments .comment-msg");$(o).text(""),$(o).removeClass("text-success"),$(o).removeClass("text-danger");var n=$(".comments .loader");$(n).removeClass("d-none")}}).then(commentAddSuccess,commentAddError).always(function(){$(".comments .loader").addClass("d-none")})});var authorKey="comment-author";function SetLocalStorageAuthor(t){"undefined"!=typeof Storage&&""!==t&&localStorage.setItem(authorKey,t)}function SetCommentAuthor(){if("undefined"!=typeof Storage){var t=localStorage.getItem(authorKey);void 0===t&&""===t||$(".comment-author").val(t)}}