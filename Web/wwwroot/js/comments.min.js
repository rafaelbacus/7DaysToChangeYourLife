"use strict";function commentAddSuccess(t,e,o){var n=$(".comments .comment-msg");if(t.result.succeeded){$(n).addClass("text-success");var a=tinymce.get("CommentEditor");a.setContent(""),SetCharacterCount(a,".post-detail .character-count");var r=$(".comment-author").first().val(),m=$.trim(a.getContent({format:"text"}));CreateCommentBlock(r,t.date,m)}else $(n).addClass("text-danger");$(n).html(t.result.message),$(".comments #RequestVerificationToken").val(t.token)}function commentAddError(t,e,o){var n=$(".comments .comment-msg");$(n).addClass("text-danger"),$(n).text("Unable to add comment at this time.")}function CreateCommentBlock(t,e,o){var n=$("<div></div>",{class:"comment"}),a=$("<h4></h4>").text(t),r=$("<p></p>").text(e),m=$("<span></span>").text(o);$(n).append(a),$(n).append(r),$(n).append(m);var s=$(".comments-list");0!=$(s).children(".first-to-comment").length&&$(s).empty(),$(s).append(n)}$(function(){-1!==window.location.href.indexOf("Post/Detail")&&SetAuthor()}),$(document).on("click",".btn-reply",function(){var t=$(this).closest(".comment").first(),e=$(t).find(".reply-editor-container").first();$(e).removeClass("d-none"),$(this).addClass("d-none")}),$(document).on("click",".comment-reply-add",function(t){var e=$(this).closest(".editor").first().find(".mce-tinymce").attr("id"),o=tinymce.get(e),n=$(".comment-author").first().val(),a=$.trim(o.getContent({format:"text"})),r=$(".comments .comment-msg"),m=$(".comments #RequestVerificationToken").val();if(""!==n&&SetLocalStorageAuthor(n),a.length<1)return $(r).addClass("text-danger"),$(r).text("Comment is required."),!1;$.ajax({method:"POST",url:"/Comment/Add",data:{PostId:$(this).data("id"),Author:n,Content:a},dataType:"json",beforeSend:function(t,e){t.setRequestHeader("RequestVerificationToken",m);var o=$(".comments .comment-msg");$(o).text(""),$(o).removeClass("text-success"),$(o).removeClass("text-danger");var n=$(".comments .loader");$(n).removeClass("d-none")}}).then(commentAddSuccess,commentAddError).always(function(){$(".comments .loader").addClass("d-none")})});var authorKey="comment-reply-author";function SetLocalStorageAuthor(t){"undefined"!=typeof Storage&&""!==t&&localStorage.setItem(authorKey,t)}function SetAuthor(){if("undefined"!=typeof Storage){var t=localStorage.getItem(authorKey);void 0!==t&&"undefined"!==t&&""!==t?$(".comment-reply-author").val(t):$(".comment-reply-author").val("")}}function GetAuthor(){var t="";"undefined"!=typeof Storage&&(void 0===(t=localStorage.getItem(authorKey))&&""===t||(t=$(".comment-reply-author").val()));return t}